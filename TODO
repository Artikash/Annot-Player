# TODO
# 6/18/2011

# CHECKPOINT
spring fest special

start translate goei2
- automatically recognize process' signal through ith's control signal
- start with mai/akemi route
- need wiki-like subtitle edit support
  - subtitles set "shared" flag by default
  - edit other's annot flagged as shared
    would make others annot invisible instead of deleted
  - need a dialog to show all annot in current FRAME including hidden ones
    reuse/extend annotBrowser

## annot.cloud
- finish website design
- add server support for annot deletion
- continue project appcloud
- continue project doll

## annot.player
0.1.2.2
- Updated to Qt 4.8 on Mac OS X.
- FIXME: dragging window disappear bug
- add outdated state into media_annot
  add an wiki subtitle edit window
  enable editing other people's subtitle in wiki mode,
  other subtitle simulate moditified/replaced, but not deleted
  alwayhs be able to get old subtitle - add an outdated attribute
  make editable an attribute? a share ttribute
  subtitile are default having shared attirbute
  shared subtitle could be marked as outdated or restored
- webbrowser: open link in new tab
- enable annot annot time
  utilizing annot.time msecs
  editing annot time

0.1.2.x
- add male/female/chaos to user's flags
  add "female" flags to annot flats
  and add client side filter.
- large number of annotations performance
- start implement LIVE mode
- make a global VERION file to read in
- font outline does n't work, need to figure out a workaround to make it clearer
  - download a free contoured font, that supporting chinese/japanese
- clean up code
  - rename open family methods
  - clean up main() with application
  - clean up player module, esp vlc part
  - clean up tr.h, rc.h
  - finish dataManager
    - use dataManager to connect dataServer instead of MainWindow
    - use dataManager to save current User as well?
- fixme: edit time, edit comments, etc; otherwise, make them readonly
- server side: add male/female option and save it as 2 user flags
- keyboard event listener + find window under mouse to pick window to embed
  implement without hook
- linux
  - FIXME: Read CD partially working before 120
  - prevent opening multiple instance
  - ubuntu:
    - fixme: ubuntu11 full screen hide unity top bar
  - fedora:
    - fixme: stucking on fedora -- caused by qt4.8?
    - fixme: DVD menu hang on fedora -- caused by threading?
    - osdWindow not on top? or hanged?
- mac
  - enable mouse tracking on cocoaview
    possible reason cause problem:
    - mouse event not cached
    - mouse event cached by vlckit
      or videoview
      or minimal_macos
  - recognize /Volumes, /media and /mnt as well
  - recognize arbitorary mountpoint as well
- win
  - FIXME: double click event ignored when too fast
    in vlccore, figure out where I could find double click
  - FIXME: The app would close when there is no visible window after injecting another process.
    such as, select process window, and press cancel
  - associate with filetype
    QSettings("HKEY_CURRENT_USER\Software\Classes\blergcorp.blergapp.v1\shell\open\command", null, @"c:\path\to\app.exe \"%1\"");
    QSettings("HKEY_CURRENT_USER\Software\Classes\.blerg", null, "blergcorp.blergapp.v1");
- Open folder
  play the first item in the folder
- ng list to settings
- Fixed recent file menu bug.
- FIXME: m3u/m3u8 which doesn't get media path correctly
- Finish bless/block user/annots/aliases at client side
  - add block/bless/curse user
  - view user info from annot
- ubuntu
  - submit to ubuntu app market

## NextStep:

(0.1.2.?)
LIVE MODE (annot not saved)
- try ppstream on windows with my player
  make sure todou work
- make default UI as open channel, and as FIRST live channel
  every chat is received
- PPStream support for chjunjiewanhui!
- chunjiewanhui channel
- support for user to create open channel
  for example: synchronzing games while playing multi-player game

- set up repository for deb and fedora

- self-update framework
  http://sourceforge.net/projects/qup/
  http://stackoverflow.com/questions/2077550/how-can-i-enable-auto-updates-in-a-qt-cross-platform-app

- SUPPORT TUDOU's LIVE CHANNEL

client:
MANGA ANNOT
- add winzip extraction to view picture
 using quazip:http://quazip.sourceforge.net/
 directly open unzipped binaries and pass it to vlc
- add thumbnail view
CD ANNOT
- add playlist view
- enable \bookmark annot, which people can click! such as. service scene

(0.1.3.?)
CONNECT WITH twitter(\t) facebook (\f) ?
FRIENDS
- friends' annot directly displayed in osdconsole
SYNC MODE (annot saved, next next step, after more and more people start using this)
  to avoid the idea being stolen by bilibili)

server:
COMMENT
- comment for each token
USER ADS


## FIXMEs
change soap back to rest
add another rest module on server side

fixme: hide qdialog after create

todo: track user last login time

select game encoding

displaying which process get attached

sutitle friendly
wiki like style for shared subtitle
update annotation time pos
diff subtitle effects

##

how to intercept directx call
http://www.gamedev.net/topic/359794-c-direct3d-hooking-sample/
- make my player on top of others
- alternative, use d3dwin tool
- use for my wine project

- on exit, hide gui
on exit, remove all hooks
use a thread to wait for thread pool and then close parent to avoid hanging

on ma: design icon for menu

- flash window rect after picking!
- Create a window tracking Layer! to unify osdplayer and annotationview

FIXME: osdscreen

- fix parallelization problem on my gemm benchmark
  start tunning
- sequential lib

rename dlls to?
- MouseHook
- TextHook
- WindowHook

- write tutorial

- use posType as stay seconds for mediaannotation!

- use hook to get hwnd under point
i.e. tracking next MOUSE CLICK for hook
  - add another mousehook for getting window under mouse click

####

soving black screen problem!!
write my own tuturail

xiaoxiang

- avoiding black screen!

- use a thread responsible for communicate with server
  only multithread in mainwindow

- show more messages in system tray

##

make communication async

TODO: forward app parameters as well

add wiki as well

mkdir settings if not exist

FIXME: how to get text between QWebElement siblings

after finish sync mode
use signaltoken mode as the base for live mode
add suport for mac/linux as well

add font waiting for caching

CHECKPOINT
- make readonly cache work
  - check annotation
  - add alias
- make late submission queue work
  - finish client logic
  - add to server:
    submitAnnotationsWithDigest
    submitAliasesWithTDigest
- use a class to shadow both server and cache and queue
  - schedule late submission to reduce server overhead
  - periodically refresh annotations

add userMenu to playerUi

add system tray, see example in examp/desktop which is very simple

TODO
- bless curse, etc
- sync mode & live mode

FIXME: at mac:
- icon!
- mouse theme

#####

fixme: add app language to settings

TODO block bless curse visit
TODO edit alias text

add blocking filter in annotationview
- keep only selected language
- keep only selected tokensid or aliases from annotation

fixme: tokenview's alias display, show aliasType as well

##
really need a global Annotations|token|alias manager!!!!!
which is also cached and take place of current server_ cache_ queue_ messes
TODO: cache annotation submission instead of immediately to save bandwidth

fixme: text length limits is measured in utf8
should use toLocal8Bits.length

then to server side
- make it work
- make it multithread safe

TODO
- finish serveragent for gamemode
- finish cache db for gamemode
  - remove primary key, and
    use annot(id,type) as key
    directly use hash as token's key

subtitle editor!

FIXME mainwindow disapeared from taskbar

- design recentmessageView to display resent message, and their subtitles, and annotations
  - ribon for blocked annotation|normal annotation| subtitle, etc
  combine: two row ribon: messages | subtitle | annotation, (down view | edit)
  recent messages view
  recent annotations view
  recent subtitle view | esp for game, subtitle view
  - view mode, subtitles as text
  - edit mode (ribon) subtitles as annotation

then come back to serverside!
finally, come to compiler

todo: system tray - see example
todo: change volumn - use platform specific calls....

miniplayer + fullScreen annotationView => liveMode

FIXME: hover effect not working! because of blur????

redesign gameview gui

gradually replace servant/player with signalhub

## TODO
use singleshot timer to imporve GUI user experimse by delay time taking task!!

rename core/gui/dialog to core/gui/window; and change default window flags!
put ContentsMargin to the parent class instead of layout!

- CITRIX!!! make windows into webapuiup

FIXME:miniplayer mode selection doesn't work
it's time to redesign the entire mode system now!
- mini|full|normal
  game|video
  video: mini|full

- passing the "hookSelected" out to its parent
// TODO: Gradually replace signals connections in MainWindow, ServerAgent and Player with this hub

- perform hasing 4 sentence in mainwindow or 1 sentence for subtitles
- in annotGraphicsView: make annots as mediaAnnots and create another gameAnnoes
  indexed by QString (hash)
- add GameMode|MediaMode in playerUi
  create another SignalHub class , connect playerUI with signal source
  connect mediaAnnots with signal source (play | pause) iff gameMode
- in the future: replace player_ and server_ in playerUi with signal source


DIFF alias from FileName
i.e. TokenFile
FileNames are only hints and useless, while alias are used to determine file

combine media/game together, only diff on proxy/delegate while connecting with server
use mainplayer | miniplayer |osdplayer aswell but adapt to game
make alwaysontop work

- add history of played game/vidoe, for easy reopenning

combine mediaannotation | game annnotation together
user: the same
token: the same
annot: pos type changed

AFTER ith, SWITCH TO SERVER DESIGN!!!!!

- sync mode
- offline mode

and context menus in annot graphics view
edit annot in annot graphics view

FIXME: button fresh problem; maybe RESTORE OLD MAINWINDOW APPROACH?
 use mainwindow and centerwidget for playerUI!!!!!!!!!!!!!!!!!
FIXME: open/drag second movie contextmenu doesn't work

TODO: in annotationeditor: add helpButton: show help!!!!

textEditor
- BECAREFULL of 255 limits! or I SHOULD LARGER the limits on annotation1!!!

annotationEditor
- option ribon
  - annotposition
  - annotanonimous
  - annottime

  - editing single annotation
    qt4 word processor!! borrow idea of qt4 texteditor demo
     need a more specific code to copy!

todo
create tester main pro for module webbrowser and texteditor

- offlinemode: minus token id for local offline token
  save a last offline token in registry


FIXME: miniplayer not working correctly!
- switcher!!
- button hover effect

save recent file in registry! add open recent context menu

- finish userpanel using webdialog


  combine trend browser with qt4 demo browser!

then after finish server arch
finish annotationBrowser actions!

- ENABLE emit changed value!!!!! reexamine all signals

upload code to google code

use REST at server for busy polling!!
always poll from the same URL (sync?tid = tokenId&slot=?   or live.jsp?channel=?)
alternatively, use live channel for PPStream!!!!

  save user's blockedCount and blockCount, blessedCount and blessCount, ...
  enable live channel to watch everything!!!

// http://doc.qt.nokia.com/stable/qt.html#ConnectionType-enum
slot immediately or queued for delivery at a later time.
Constant	Value	Description
Qt::AutoConnection	0	(default) If the signal is emitted from a different thread than the receiving object, the signal is queued, behaving as Qt::QueuedConnection. Otherwise, the slot is invoked directly, behaving as Qt::DirectConnection. The type of connection is determined when the signal is emitted.
Qt::DirectConnection	1	The slot is invoked immediately, when the signal is emitted.
Qt::QueuedConnection	2	The slot is invoked when control returns to the event loop of the receiver's thread. The slot is executed in the receiver's thread.
Qt::BlockingQueuedConnection	4	Same as QueuedConnection, except the current thread blocks until the slot returns. This connection type should only be used where the emitter and receiver are in different threads. Note: Violating this rule can cause your application to deadlock.
Qt::UniqueConnection	0x80	Same as AutoConnection, but the connection is made only if it does not duplicate an existing connection. i.e., if the same signal is already connected to the same slot for the same pair of objects, then the connection will fail. This connection type was introduced in Qt 4.6.
Qt::AutoCompatConnection	3	The default type when Qt 3 support is enabled. Same as AutoConnection but will also cause warnings to be output in certain situations. See Compatibility Signals and Slots for further information.

add format to media universe

- THEN focus client architecture, and figure out what are required api
- FINALLY redesign the server slide architecture
- THEN focus webGUI
  - webbrowser, maybe combine in a single browser!!!!
    - comments
    - trends
    - friends
    - live channel

SYNC MODE
  live mode & sync mode: poll server every 3 sec

save counts at server

LIVE MODE
pure live mode: be able to comment without real movie!!
  - integrate with ppstream!!!
    allowing people to create live channel for chatting!!!
  - integrate with tudou,youtube live@春节晚会
- watch live video (not broad cast by me) globally!!!
  - watch live mode in 春节晚会
  - live mode associate with channel!

- add adding alias TokenView
- finish displaying annotationview
  - for example: status -> hide/ban, etc
- add snigle annotation view - or annotationeditor

Add MediaTokenAlias support in database and client

put a button to open Trend  or login on the start page!

##
- in html, add \img as well!!!
need loadResource(2, url), and then setHtml(toHtml) to refresh
http://doc.qt.nokia.com/latest/qtextdocument.html#loadResource

linux: fixme: linux compile sharedlib
mac.illustrator
- Make icons looking better!
  - First the canvas size to 200
mac: VLCConfig.h: disable unused param warning

##
TODO: pass class ID while calling UiStyle::setWindowStyleWithQSS(id = class Id)

FIXME: setTabOrder between lineEdit and prefixlineEdit!!
let mainwindow to manage current TOKEN instead of tokenView!!!!

change OSDDock to QDialog instead of QDockWidget??
need a better way for soap polling!!!! that consume less bandwit

TODO: SSL support
- gsoap: SOAP_ENC_SSL
- cxf: http://mail-archives.apache.org/mod_mbox/cxf-users/200807.mbox/%3C48860616.5000807@fluxcorp.com%3E

UPNP API? maybe gupnp?

FINISH LIVE MODE!!
- every 15min, watch sync together!!
  see how many people in the live time slot
- serverside runtime database...todo

- Finish TokenView
  - add adding alias
  - add editing alias
  - add token information panel
  - at server slide, finish cluster token
  - add a combobox to select tokens according to its language flags??
- Finish editing in AnnotationView
  - only editable when owned by user
  - mapping reasonable field
- Add editing single annotation view

- finish browsing annotation
  - edit annotation
  - ban/bless/curse/rate annotation
- add contextMenu support to all above

##
make better QSS: combobox,abstractitemview, and treeview
- see: http://doc.qt.nokia.com/stable/stylesheet-examples.html

FIXME: Adapt TIME ZONE!!!!!

- Use QDialog to replace Dock structure!
- Create a annotationManager instead of putting everything into AnnotationGraphicsView

- add UserPanel
  - Friends
  - History .... maybe better to use WebBrowser?


design LiveModeButton! in illustrator

REDESIGN architecture to combine these MODE!!!

click user icon popup menu
- online|offline
- login|logoff
- anonymous
display user avatar
- ghost(online)
- ghost(offline)


- Use QGroupBox to improve playerUI
- Reduce non-reuseable T_... number
- Diff private slots from public slots

FIXME: use UiStyle to remember DWM effect instead of MainWindow::dialogs_

- add editing token alias
- add comment on the entire token -- maybe using trends?
- better chatting mode -- chat with friends and chat with doll

- change statistic logic:
  - keep bless
    remove cursed
    diff ban from hide

  - chat
  - synchronzied watch

change a better default font

webbrowser widget
- register page
- browse trend

add prefixlineedit with auto-resize function

BACKUP C:\dev, c:\apache c:\oracle... folder!!!!!!!!!!!

FIXME: offline mode
try to queue annotation for token even in offline mode!!
- fix the submission when tokenId is 0
- extend database and universe/mediaannotation, append token hash in annotation when the tokenid is unknown
  let the primary key to be token_hash?

FIXME: server callback????

###

female:yin
male:july or hei?

\eval
\java
\js

change statistic logic:
- keep bless
  remove cursed
  diff ban from hide

add user_gender
- male
- female
- unknown

user_gender to annot_flags? annot_gender?

update login/connection status periodically

select a \kawaii font

add language context menu

programmable change the color/size of qslider according to # of comments

- finish hide/ban/curs/ bless etc

##

##

Major components that are missing at client side:
- annotationList
- tokenView -- edit media token alias, tags
- commentView
- userView, friends, follow ...


add media_tag, media_alias

// TODO: log offline bless event!

##

need:
- annotationManager
- tokenView
- commentView
- userView
- mediaView to get hotspot??


##j
- design friends relation!! in server side

##

- make db.cc less verbose and redundency
- use db to reduce server access

##
temporarily, mannually send a remote event:
on client side: http://doc.qt.nokia.com/latest/qtcpserver.html
so that server could notify client to check changes at server

####################

####################

##
- add \h, which pop up a nother persistant window
\h color
\h blue
etc
bydefaullt search

- add the second gconsole

\man and \manual or \search
open second osdconsole

 \login
 \logout
 \touch

##
- danmu player foriPhone as well

- use a timer to automatically sync database every few seconds?
  also, need to set a flag in settings to indicate if queue is empty
  fixme: annot.id, token.id inserted to queue_ is zero.... and hence duplicate cases

- FIXME: compensate timezone while computing timestamp!

- TODO: make better naming for play modes, mini mode, etc
- fixme: Use UiStyle to globally turn on/off aero styles ...

##
-todo periodical check connect status ??
- polling?

redesign player module similar to client:
  removeserventdelegate
  localservantdelegate
player
playerdelegate
vlc

- create the social network
  - feeling of home
  - able to work
  - cloud

- select caption published from diff user

###

- focus on watch together!!!! tracking status of online people
  - need server support, finish server structure first

- deal with case when opening a non-media file
- fixme: openPath(existed)... and from clipboard
- handle open subtitle to open file!!!!
- handle open subtitle from clipboard

- display # of comments in popup timeline

- lean adobe illustrator

- doll module


##
qtscript and plugin
in reader: use waitftodone to avoid corruption....

- enabling sharing bookmark/chapter of video/movie such as OP as well


- add function to switch audio track
- add function to switch chapter
- fixme: waiting for building font cache...
- handle subtitle from dragdrop
- fix encoding problem

##
- server: finish visit/bless/curse statistics spell page
  using javabean rather than directly access db

\env{environment_variable}

- mac: combine bk image with opacity effect
- fixme.mac: hide videoview onstartup -- startup not showing ...
- fixme: mac
  - moving window problem! not always mapped well!! -- caused by VLC video kit??!
  - right click context menu a
  - direct mouse/keyboard event from videoview to mainwindow

- add p2p support:
  add chat and watch with friends! u can see where ur friend is watching
  or even enable PLAY PAUSE etc control event, so that u and ur friends can watch same movie together!!!!!!!!!!!!!!!!!!
  make gConsole a better one similar to chatter!

figure out a way to finish prototype as fast as possible
focus kernel functions first
- client:
  - annotview
  - commentview
  - p2p: chat, friends, watch together!!!!
  - offline mode
  - statistics
- server:
  - webui
  - social
    - relations
  - ai
  - cluster specific movie/event/anime!

###

// outline font tricks ...
http://www.w3schools.com/cssref/pr_outline-style.asp
http://www.ahfb2000.com/webmaster_help_desk/showthread.php?t=1397

\caption
\sub
\subtitle

todo: parse() return attrs for tags as well??
support begin end with support for []
begin -- tag_open
end -- tag_close

add \eval{} for instance: \eval{1+2}
add \tr{} using google translation

user
group

design better user relation! like task, etc

diff annot from comment
then add additional comment into db

add hide and make it diff from ban

##

anonymous option to encrypt userid+tokenid
nameSha1 -- anonymous login

connect vlc error to mainwindow
when error, reset the mediaplayer in mainwindow

replace password with passwordSha1 in logindialo  g

\touch -- \t
\facebook
\twitter
\weibo

userbutton pop up menu
logout
login
anonymous or visible
add chat or chat room in the future
add offline mode later

##

instead of mediasource, add mediatag to deal with matching DVD

add offline mode -- automatically track latest 10 media file
improve offline mode focusing university
very important to start from UNIVERSITY
for instance support download offline subtitles!

youtube copy
add HOTSPOT for video!!!!!! in another positionview (hotspotView)!!!

fixme: make item selection easier in viewer

how to notify client from server

enable user's anonymous mode to hide the real watcher!

start from side annotation rather than entire annotation for pdf
http://www.boost.org/doc/libs/1_47_0/doc/html/boost_asio/examples.html

fixme: failed to open file for hashing -- only not working on release mode?
allow add arbitorary comment style
fixme: context menu not work again
make texttt, textrom to change font automatically
add stylesheet to xml

be able to change commentstyle transparency, size, location, etc
fly direction: right to left

todo: add cmd_warn cmd_error!

http://www.w3.org/TR/xml-stylesheet/
display XML as XHTML

fixme: avoid submit comment with incorrect command!
replace blue,red,purple,orange with a meaningful macro name

FIXME: make a better parser!!!
(left, cmd, right) parseMiddleTag
\red{efrf} parser!!

http://www.ncdesign.org/html/s010font.htm

http://en.wikibooks.org/wiki/LaTeX/Formatting#Emphasizing_Text

make a better style

get rid of the jsp extension!

add register.jsp
redirect in login.jsp
add redirect.jsp, used for login.jsp to forward pages

DVD hash: using gnu libcdio -- same as vlc
http://lavica.fesb.hr/cgi-bin/info2html?(libcdio)Example%205

if cannot compile libcdio, alternatively, try to reuse libcdio.dll from vlc plugin!

try directly open the raw iso media file in VLC

use: following api to get exact vlc status, rather than using status variables myself to track the status
libvlc_media_player_get_state

server: finish register webui

- need persistant storage for application to save userName/password, etc
user.php login support param.encrypted_password.toHex which use sha1(password) to login

avoid using qdebug -- replace all qdebug with dout -- todo

qdockwidgets -- hide during initialization

fixme: gconsole conflicts with commentview -- need to figout who is the receiver! use mouseOverEvent, e
  need to put gconsole into lowest
clipboard action

qslider style: transparent handle

server:add verification to param using java
server:add separation layer between jsp and mysql

##

new user sys like status update that people can assign task for commercial usage ESP a group

same real name and rmail to have diff user id.    ie master account

- change default gconsole font to be bold which is too small to select

- todo: add contextMenu to pause/resume OSDConsole autoDClear
- todo: add contextMenu to copy OSDConsole text
- todo: add contextMenu to copy CommentItem

- Eliminate OSDDock, but use a seperate osdwindow???


figure out a good mechanism to describe user relation!
i.e. access control
people are expecting changes

user system!!
- register website ui
- security
ask jankins to design a better security system
finish login user in client side

important message / message from friends pass to console
- allow pause console message
- make console be able to parse message color, etc
- beable to move/ highlight console
- add username to console message

- very important to make a circle: http://corari.com/

restore annot_source!!!!????

- ݓI⋓f= =|||
- ukagaka  -- ai to do this!
http://sourceforge.net/projects/ukagaka/

commentitemview -- comment selection
tokenview -- token selection

See example

make another Core::MediaToken/Core::MediaAnnot class?
typedef MediaAnnot Comment?

make cluster more clever
avoid whereQuery clause in JSP!!!! use param value=, etc !
add magic/spell to user.jsp

rename to Core::MediaToken/MediaAnnot!

connect mediaplayer error!

// libvlc_MediaStateChanged -- ?

// libvlc_MediaPlayerOpening -- ?
// libvlc_MediaPlayerBuffering --?

// libvlc_MediaPlayerForward -- use this to solve seek problem?
// libvlc_MediaPlayerBackward

// how to solve pass problem?

// libvlc_MediaPlayerEndReached -- ?
// libvlc_MediaPlayerEncounteredError -- TODO: Add an InternalErrorEncountered Event!


# -- databaase

rename token to media at client slide?
tokenId => mediaId!!

- user -- consistent with PHP, etc
track down watched! for each person from each region!

so that we can know who from where is watching this video! just like google
try to collect everything we could! maybe make use of it later

collect ip for users as well to prevent scam!! and in the future,

oss window a separate window than dock

rename add comment to add text

split added and modified
use reply classes with lots of signals
add sepetate detecr change function to dwm

add cmd_update in jsp to modify a specific value
fix Mac geometry

##

connect mwinwindow with error processing for server


TODO: make comments part of CommentItem! like property, right click etc

annotinfo database to save bless/curse/flag count
maybe integreate server into commentVIEW!

allow edit comment! such as time/etc

add annotinfo into database with following:
allow magic:bless/curse comments/people .. blessed being kept
  -- add blessed_count/cursed_count in annot
  -- rename annot to magic? or sth
everyone is a magician

make into CONFIG option to dynamically determine if link or not

fix Mac geometry

fixme: how to deal with user32.lib on xp problem
  - maybe link statically? if so, no need to use static lib for dwm package.
stop response to connection when mouse hoving over qslider to prevent seeking problem!!!!

CHECKPOINT
todo: take a snapshot of the entire screen including danmu

learn php grammar
move user/danmu server into bigbend@php@mysql!
then, design user system
add context menu for commentitem

Add action: Toggle comment/pause comment/resume comment

fixme: osdwindow/commentview shadowed all events passed to mainwindow ...

combine gConsole and comment together using the same StyleParser!!

rei for official use
asuka for fuck use

Improve performance! First trip the command out, then use hashString to compare tag!

ask rei about this movie that this time
non fly comment

fixme: keyboard interruption cause hook to flush "single click" event
fixme: fix qslider!!

schedule stay life

use transpacency + graphics blur effects to simulate aero on no wdm environtment (xp, mac, etc)


rewrite aboutdialog,helpdialog using sth similar to userpanel
make userpanel a generic my own type of dialog, create touchplayer/dialog/dialog, etc
then create another preferecies/option dialog inherit this base dialog

showcomment preserve last color

refer to googlechat, how to remotely access my doll
create diff dolls, doll/rei -- write database structure???
doll/rei -- official
doll/asuka -- porn
doll/yin -- ?? language? zh/cn?

disable functions when not logged in?

merge everything into option panel
make userpanel into dialog/logindialog
option
userpanel
damnupanel
mediapanel

move aiml into server module
using ssl to communicate

http://www.metalshell.com/source_code/108/OpenSSL_Server_Example.html

user preferences to synchronize data

danmu control panel... region/languages to right menu
fixme: midbutton toggleminimode request not work
check if winidonmac is nsview*

right menu: Chinese/english/japanese

add a user/Account or user/UserInfo class to MainWindow or from main

CHECKPOINT
design user system
create a runnable server side using qt4 temporarily
afterthat convert everything into pure C/C++
after that, make everything through internet

design DatabaseConnection to connect with CommentScreen
design Database
design CommandParser // using javascript!
design User system
design fileid hashing system

- rei
rewrite entire set from the begining
allow doll to add comment as well
refine aimlbot_config, avoid hardcode pathes
<learn> and badanser.aml. redesign aiml sets myself! try to keep things simple.
<eval> not defined

check hash macro function
  do it in switch case way


refine vlckit directory structure.

button non-transparent background when osd? so that it is easier to click?

learn qml: http://doc.qt.nokia.com/qt-components-symbian-1.0/qml-contextmenu.html

then continue to user system design; move things to pseudo server

search for windows7 aero wallpaper as background when USE_WIN_DWM is disabled

a doll sitting at the corner of the player, showing the emotion of the doll
the doll should look like yin
search for picture of yin@dtb/ghost/etc


###
change comment to javascript? using javascript engine?
can I use javascript in textitem?

a new button in playerui, showing if comment is enabled

split hook into mousehook, keyboard hook, and a shared hook base class
same source
put to pro file here, one mousehook.pro, mousehook.dll, and one keyboardhook.pro, keyboard hook.dll

##
try to parse the latest aaa!!!!
put aimlbot into SERVER project!

a seperate Doll class
  manually integrate parser (setparser) into bot
a seperate server pro, put things into server
  figure out a better name for touchplayer | touchreader and server
japanese aiml
##

maybe javascript is better rather than \play?



maxthon javascript style: http://www.boonzheng.tk/search/

vlc - mkv/font cache and config
- display subtitle!!!!!!!
- font caching change signal...?
  - then, use qprogramdialog for waiting caching

redesign the directory structure
-
kernel:
  core
low level:
  commom/win32
  common/mac
mid level:
  modules/mediaplayer
  modules/documentreader?
top level:
  projects/touchplayer
  projects/touchreader

fixme: fix computation for osdplayer and commentview!
again, need to tweak qmaccocaviewcontainer's nsview to send mouse events!
use background paper to simulate aeora


design CommentParser to parse comment style: \red \blue
looking for an open source tex like parser!
allow persistent comment style using \reset to clear?

compile mac version
stylesheet to change qcursor.

ai (alice robot)
the world of fantasy
a girl from another dimension is trapped there


add button to hide comments or \hide comment
fix positionslider unsmooth/dragging problem!!!

// TODO: avoid putting everyiting into CommentScreen
redesign it into a commentstreamer, maybe


CommentParser, enable Core::Comment::Parse to deal with \pause \left \red .....
start from \red and \play
implement \quit \play \red \blue first!

think about a better/clean/easy/neat way to display hot videos, select danmu version, to cluster danmus

##
remove moutiple hooks in windowshookmanager
-- clean up windows hook manager to improve performance

- add osd help (keyboard shortcuts, etc)
osdconsole -- todo, display message such as volume up/down; \play, \h, \left...


- forward | backward speed depends on number of modifier keys pressed

- create a new dockwidget displayer list of comments (qlistwidget)

- redesign miniplayer that
  - synchronize WindowsTitle with positionLabel
  - and then figure out a machanism to hide/disable widget/connection
    and how to redirect connection in playerUI.


#### commend parser
auto popup completion
syntax highlight!
command parser

style:  \strong \em \emph \big \small..
control: \play \time{5}  \pos
\red{wfwf4} \blue
\search

\play.....etc \forward time \backward{time}   -  \forward 150s
\time etc
\chat
\kill
\comment

add an console item output to commentScreen
or maybe attach another QLabel on to OSDScreen

to compromize this, it is important to redesign the structure of mainwindow, maybe add a customizeevent (control event)

figure out the major purpose/usage
- accurate style (time, pos)
- accurate control (time)

- so that it is easier to type
- so that it is easier to save comment
- so that it is easier to make subtitle (drag, etc....)

- different mode: normal mode, subtitle maker mode,


####
- add openUrls which will open multiple files!
  - then prevous/next file
merge multiple playermode into one!!!!

make commentScreen commem, or add another OSDscreen?
enable OSD message such as Volume change, title change as well
or I can enable displaying thorugh vlc?

- pause comment
  use mouse to move comment

CommentStreamer
- setFetchInterval
- setStreamInterface

BECAUSE styleBUTTON IS SO COMPLETE, add things like this:
  \blue \red \fly \top \bottom, etc
- Add comment style buttons: hint: color / size / fly style
- a global databasemanager
- A global CommentManager
  - ShadowScreen STREAM comments from CommentManager
    CommentStreamer receive positionChange signal and will issue comments to commentScreen
- design User system!

- Identify media file ---- later

- SSL! then web widget, and other user composnents

- fix osdplayer layout and location
  - if looked good, enable osdmode even in fullscreen mode
- restructure playmode / mini mode, maybe combine them together
  - similar to window status, that combile playmode and minimode together

- libvlc screenshot
  libvlc_video_take_snapshot

- interpret mode....?

- optimize performance by reduce listened crutial events
  - such as timeChanged

## reader
- try use qnetwork to get qbytearray then use Poppler::loadFromData to get internet content
- restructure the whole project!
rename touch-qt into viewer, and get read of ...

 make the interface like a web browser

 redesign the entire architecture, figure out a better neat structure to deal with textrect

##
write cv

- create icon using adobe illustrator
  - adobe illustrator for mac os x
- reconstruct mainwindow into a event processing/forward struction
  - take event/signal from media player
  - forward it to other composnents

- set diff color qss for vol/pos slider
- make play/pause button BOLD using qress


##
- forward event to mainscreen, rather than processed by mainwindow!
  so that mac/linux could also use mainscreen to do things

- try app in my windows xp virtual machine


- redesign UI/panels -- mini/osd/main switchible
  - control panel
    comment panel
        status panel
   - left: paylist|history panel
     right: comment panel
     down: control panel
- add comment list panel

- fix qslider cannot click

- set qss for lineedit browing qtaero style

- otaku mode used for matching diff files with same comment


- pause flying when pause using QAbstractAnimation pause slot

- connect to my own chatting robot? morisa? on default!!
  - public chat place when no media is played


- recognize media file

- add webkit for comment list

- add a location bar where people can directly specify location for webpage?
- and add annotation even for webpage?
- combine player and reader together in the future? into touch.me?

##
- add a button to enable move osdplayer
  and if hide, open miniplayer

- support play internet movie
  - openURL
  - directly open youtube/sina/bilibili video, etc

- rename touch to detail/engine/wrapper????

- fix resize warning
- fix startup abortion!

- network synchronization

- webkit

##

- show a welcome OSD message on start?
  using QWebKit to browse website like touch.reader?
  a desktop toy as well?


remove poppler from header file.
remove vlc from header file.

give an option for debugging

autohide minidock/mouse

- figure out if vlc can display danmu, maybe using opengl layer?
- full screen
- OSD to display input for danmu
- overlap widget
- port to mac
##
- make a large graphicsview size, but use dock's margin to crop it
- todo how to specify "plugin" folder?
- support open universal media, not only file
- support multiple instance, if above

- fixme: press button and drag will cause problem



########################


 Poppler+curl
 open pdf url from internet?!

 - use window hint to add min/max button to dockwidget
 - index textrect using qgraphicsscene
  setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
    setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
- to fix graphfic view size problem
  - use resize / fitItem instead of setFixSize
- fix style in mac, use QtAero as an example
  - the reason must be the missing when qwidget style
- change .h .cc comment style
- use qobject_cast intead of dynmic_cast
- replace if(bad()) with q_assert in touch
- CHECKPOINT
  columeview with previews for each comment

 - afterthat pageview
 - afterthat display each annnotation in pageview
   into the pdf

- STOP IMPROVING WINDOWS MANAGER!!
  USING Aero example instead!!!!
  - transparency!!
  - draggable tab!!
  - close button on tab!!!

  see its effect in mac/linux as well

- make menubar autohide
- clean touch headers

- use QSplitter instead of QDockWidget?

- annotation widget on the right
  add annotation shape into pagepreviewwidget
  - start document annotation
    - just like twitter/chat about the document!
     use eithter colume view like ios
     or directly webkit in the future

  - then from page annotation
    use a proper itemview/graphicview with abstract item model
    let touch::annotation to return scene / model

  - then anywhere in the page annotation
  - then textrect annotation

- like googlechat, chat while using the app

- a rebon on the top aboe tab for holding purpose.
  - see the mainwindow demo!
  transparent, maybe
  future: bookmark bar link chrome, etc
  or even put bookmark and tab in the same bar
  or like toolbar of office in mac


- top widgets, like: reader bar, magnifier (see deform example)
- make the kernel part of viewer close source!
  use a wrapper to wrap opensourced engines
  so that the things based on it are closed source and linked as dll
  i.e. split opensourced engine from the gui

- fixme doxygen.pdf on mac doesn't work.

- use qwebkit widget copy code from assistant.centerwidget
  to make a start page, like chrome, have diff links, history, etc

- in mac - rebuild my own poppler from source
- in linux - rebuild my own poppler from source

- totally remove menubar in center widget
  copy code from assistant.centerwidget to make a button menu on the up right corner.
- finish assistant center widget -- tab model
  - USE Widget / toolbar as the corner button
- remove status bar, but use another kind of popup helper

- like office for mac, use tabs in toobar banner, maybe as the north widget
- combine menubar, tabbar, windows bar together as a widget like chrometab
- dragEvent, dropEvent to move tab
- edit CSS style for app

- fixme: reset and repaint other page when move into a new page using mouse
- fix this problem:  Need QMutex on Poppler! or move right click into render queue as well?
- fix this problem:  QThread: Destroyed while thread is still running
- fixme: scroll bars in graphview
- fixme: bogus memory allocation size from poppler?
##
- search bar on the top of thumbnail

- abstract element to index the tree
- annotation
  - see widget: tooltips, scribble, wigglely
  - see animation: animated tiles, move blocks, states, ...
  - see opengl
- use image layer, etc to compose image rather than hardcode textbos
- improve performance
  - chasing textblock! pure text mode?
  - zoom

- Toolbar with search/annot/highlight
- navigator
- thumbnail widget
- bookmark, and deal with links in pdf
- pure text cursor independent of mouse!!!

- fixme: zoom problem, and speedup!
- todo: use event to forward mouseevent from page to document
- todo: use sizeHint and sizePolicy to deal with resize

- maybe later use a status bar / sth in the middle to show reading document status
- see filter examples in itemview for implementing find bar
## Performance
- fix qpainter begin/end performance
- use layer to generate paint, to save time: directly draw on pixmap, with backup
- extend selectLines to select in an efficient way
- when select large place, color it line by line
- fixme: lines are in different order
- fixme: move button on tabbar cause problem


## technical problem
- how to get poppler in parallel?
  FIXME: after openning the app, before parsing stopped, use mouse selection will crash the app
  I can use QMutex and set selection has highest priority, but it is better if poppler support parallel : since forsome reaseon, pthread.dll is not used!!
- how to get line of text? with textcursor?
- how to get bookmark/overview/index links from pdf?
- how to improve performance? like zoom?

## future
use libpng,ziplib, to read from zip file

# EOF
